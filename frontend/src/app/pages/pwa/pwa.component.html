<div class="page-container">
  <h1>üì± PWA (Progressive Web App) - Backend Selector</h1>
  
  <div class="info-card">
    <h2>Progressive Web App com Service Workers</h2>
    <p>Esta p√°gina funciona como uma PWA nativa, com capacidades offline, notifica√ß√µes push e instala√ß√£o no dispositivo.</p>
    <div class="rendering-info">
      <span class="badge pwa-badge">PWA Enabled</span>
      <span class="badge service-worker-badge">Service Worker Active</span>
      <p><small>Funciona offline com cache inteligente e atualiza√ß√µes autom√°ticas</small></p>
    </div>
  </div>

  <div class="pwa-status">
    <div class="status-row">
      @if (isPwa()) {
        <span class="status pwa">üöÄ Rodando como PWA</span>
      } @else {
        <span class="status browser">üåê Rodando no Browser</span>
      }
    </div>
    
    <div class="status-row">
      @if (isOnline()) {
        <span class="status online">üü¢ Online</span>
      } @else {
        <span class="status offline">üî¥ Offline (sem conex√£o)</span>
      }
    </div>
  </div>

  <div class="selector-section">
    <form [formGroup]="configForm" class="config-form">
      <div class="form-row">
        <div class="form-group">
          <label for="database">üóÑÔ∏è Database:</label>
          <select id="database" formControlName="database" class="form-control" [disabled]="!isOnline()">
            @for (option of databaseOptions; track option.value) {
              <option [value]="option.value">{{ option.label }}</option>
            }
          </select>
        </div>
        
        <div class="form-group">
          <label for="cache">‚ö° Cache:</label>
          <select id="cache" formControlName="cache" class="form-control" [disabled]="!isOnline()">
            @for (option of cacheOptions; track option.value) {
              <option [value]="option.value">{{ option.label }}</option>
            }
          </select>
        </div>
        
        <div class="form-group">
          <label for="method">üîó M√©todo:</label>
          <select id="method" formControlName="method" class="form-control" [disabled]="!isOnline()">
            @for (option of methodOptions; track option.value) {
              <option [value]="option.value">{{ option.label }}</option>
            }
          </select>
        </div>
      </div>
      
      <div class="form-actions">
        <div class="config-preview">
          <strong>üìã Configura√ß√£o PWA:</strong> {{ getConfigDescription() }}
        </div>
        <button 
          type="button" 
          (click)="processRequest()" 
          [disabled]="loading() || !isOnline()"
          class="process-btn">
          @if (!isOnline()) {
            ÔøΩ Offline - Sem Conex√£o
          } @else if (loading()) {
            ‚è≥ Processando...
          } @else {
            üöÄ Processar Requisi√ß√£o
          }
        </button>
      </div>
    </form>
  </div>

  <div class="result-section">
    @if (loading()) {
      <div class="loading">‚è≥ Processando requisi√ß√£o PWA...</div>
    } @else if (error()) {
      <div class="error">‚ùå {{ error() }}</div>
    } @else if (result()) {
      <div class="success">
        <h3>‚úÖ Resultado da Requisi√ß√£o PWA:</h3>
        <div class="data-display">
          <p><strong>Tecnologia:</strong> {{ result()?.tecnologia }}</p>
          <p><strong>Vers√£o:</strong> {{ result()?.versao }}</p>
          @if (result()?.mensagem) {
            <p><strong>Mensagem:</strong> {{ result()?.mensagem }}</p>
          }
          @if (result()?.status) {
            <p><strong>Status:</strong> {{ result()?.status }}</p>
          }
          @if (result()?.timestamp) {
            <p><strong>Timestamp:</strong> {{ result()?.timestamp }}</p>
          }
          @if (result()?.cache) {
            <p><strong>Cache Usado:</strong> {{ result()?.cache }}</p>
          }
          @if (result()?.database) {
            <p><strong>Database Usado:</strong> {{ result()?.database }}</p>
          }
        </div>
      </div>
    }
  </div>

  <div class="tech-info">
    <h3>üîß Op√ß√µes Dispon√≠veis (PWA):</h3>
    <ul>
      <li><strong>App Type:</strong> Progressive Web App + Service Workers</li>
      <li><strong>Databases:</strong> PostgreSQL (Prisma) + MongoDB (Mongoose)</li>
      <li><strong>Cache:</strong> Redis com NestJS cache-manager</li>
      <li><strong>Protocolos:</strong> REST, GraphQL, gRPC, Microservices</li>
    </ul>
  </div>
</div>
